<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Weather App</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <style>
    td{
        font-size:20pt;
    }
        i{
            font-size:20pt;
        }
    </style>
    <!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://cdn.jsdelivr.net/npm/jquery@3.6.3/dist/jquery.slim.min.js"></script>

<!-- Popper JS -->
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://kit.fontawesome.com/3e2a93553e.js" crossorigin="anonymous"></script>
</head>
<body>
    <nav class="navbar navbar-expand-sm bg-dark navbar-dark ">
  <a class="navbar-brand" href="#">ForecastStar</a>
  <ul class="navbar-nav">
    <li class="nav-item">
      <a class="nav-link" href="#">Current</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" href="#">Hourly</a>
    </li>
     <li class="nav-item">
      <a class="nav-link " href="#">5 day</a>
    </li>
    <li class="nav-item">
        <a class="nav-link" href="#">Alerts</a> 
    </li>
  </ul>
</nav>
    <input type="text" id="city" class="form-control" placeholder="Enter City Name"><button type="btn" class="btn-success form-control" onclick="findkey()">Get Weather</button>
  <table class="table table-striped">
      <thead>
          <tr><th>Time</th><th>Temperature</th><th></th><th>Weather</th><th>Probability of Precipitation</th></tr>
      </thead>
      <tbody id="tableinfo">
          
      </tbody>
  </table>
<script>
var lockey= null;
function findkey(){
     var city=document.getElementById('city').value;
     fetch('https://dataservice.accuweather.com/locations/v1/cities/search?apikey=MqX8AO5ER51bQES8vBEMhzKueEX9xsWs&q='+city)
       .then(response => response.json())
        .then(data => {
      var key= data[0].Key;
      alert(key)
      lockey=key;
      setTimeout(loadweather,1)
     } )
}
 function loadweather(){
    
     
      fetch('https://dataservice.accuweather.com/forecasts/v1/hourly/12hour/'+lockey+'?apikey=MqX8AO5ER51bQES8vBEMhzKueEX9xsWs&details=true')
      .then(response => response.json())
      .then(data => {

      for (let i = 0; i <12; i++){
               var desc= data[i].IconPhrase; 
               var temp=data[i].Temperature.Value+"Â°";
              var icon=null;
              var precip = data[i].PrecipitationProbability+"%";
             const d = new Date();
let hour = d.getHours();
var time=hour+i+1+":00";
if(hour+i+1>12){
    var clock= hour+i+1;
    clock=clock%12;
    time=clock+":00"
}


                   if(desc==="Mostly cloudy"){
                      icon="fa-solid fa-cloud-sun";
                   }  else if(desc==="Partly cloudy"){
                      icon="fa-solid fa-cloud-sun";
                   }else if(desc==="Cloudy"){
                      icon="fa-solid fa-cloud";
                   }else if(desc==="Intermittent clouds"){
                      icon="fa-solid fa-cloud-sun";
                   }else if(desc==="Rain and snow"){
                      icon="fa-solid fa-snowflake";
                   }else if(desc==="Snow"){
                      icon="fa-solid fa-snowflake";
                   }else if(desc==="Flurries"){
                      icon="fa-solid fa-snowflake";
                   }else if(desc==="Mostly sunny"){
                      icon="fa-solid fa-sun";
                   }else if(desc==="Rain"){
                      icon="fa-solid fa-cloud-rain";
                   }else if(desc.includes('t-storms')){
                      icon="fa-solid fa-cloud-bolt";
                   }else if(desc.includes('Showers')){
                      icon="fa-solid fa-cloud-showers-heavy";
                   }
                   var row = document.createElement('tr');
             var timet= document.createElement('td');
             timet.innerHTML = time;
             row.appendChild(timet);
             var tempt = document.createElement('td');
             tempt.innerHTML = temp;
             row.appendChild(tempt);
             var icont = document.createElement('td');
             var iconclass = document.createElement('i');
             iconclass.className = icon;
             icont.appendChild(iconclass);
             row.appendChild(icont)
             var phrase = document.createElement('td');
             phrase.innerHTML = desc;
             row.appendChild(phrase)
             var prob = document.createElement('td')
             prob.innerHTML = precip;
             row.appendChild(prob)
             document.getElementById('tableinfo').appendChild(row)
             
               
      }
     } )
      }
      
      
 
 
</script>
</body>
</html>
